% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/flagASRcont.R
\name{flagFlatline}
\alias{flagFlatline}
\title{Apply flatline QC flag}
\usage{
flagFlatline(flag, vals, meta)
}
\arguments{
\item{flag}{character vector of current flag values (\code{"pass"},
\code{"suspect"}, or \code{"fail"}).}

\item{vals}{numeric vector of observed values, the same length as
\code{flag}.}

\item{meta}{single-row data frame of metadata for the parameter being
checked.  Optional numeric columns \code{FlatSuspectN},
\code{FlatSuspectDelta}, \code{FlatFailN}, and \code{FlatFailDelta}
define the run-length and tolerance thresholds.  Either pair may be
absent or \code{NA}, in which case that level of check is skipped.}
}
\value{
Updated character flag vector.
}
\description{
Apply flatline QC flag
}
\details{
Uses \code{\link{rleFlat}} to compute consecutive run lengths.
An observation is flagged \code{"suspect"} when its run length (computed
with \code{FlatSuspectDelta}) reaches \code{FlatSuspectN}, and
\code{"fail"} when its run length (computed with \code{FlatFailDelta})
reaches \code{FlatFailN}.
}
\examples{
flag <- rep("pass", 8)
vals <- c(10, 10, 10.005, 10.002, 10.001, 10.003, 12, 12)
meta <- data.frame(FlatSuspectN = 3, FlatSuspectDelta = 0.01,
                   FlatFailN = 5,    FlatFailDelta = 0.01)
flagFlatline(flag, vals, meta)
}
